var sendUrl = "../../Tool/ActionHandler.ashx?action=GetTicket",
    calcTicket = function(e) {
        var t = "";
        return $.ajax({
            url: e,
            type: "post",
            data: {},
            dataType: "json",
            async: !1,
            success: function(e) {
                t = e.msgStr
            },
            error: function() {}
        }),
        t
    },
    url = window.location.href,
    ticket = calcTicket(sendUrl),
    createNonceStr = Math.random().toString(36).substr(2, 15),
    createTimeStamp = parseInt((new Date).getTime() / 1e3),
    calcSignature = function(e, t, n, a) {
        var c = "jsapi_ticket=" + e + "&noncestr=" + t + "&timestamp=" + n + "&url=" + a;
        return shaObj = new jsSHA(c, "TEXT"),
        shaObj.getHash("SHA-1", "HEX")
    },
    _signature = calcSignature(ticket, createNonceStr, createTimeStamp, url);
wx.config({
    debug: !1,
    appId: "wx955916406c6c1184",
    timestamp: createTimeStamp,
    nonceStr: createNonceStr,
    signature: _signature,
    jsApiList: ["onMenuShareTimeline", "onMenuShareAppMessage"]
}),
wx.ready(function() {
    wx.onMenuShareTimeline({
        title: "麓湖年会邀请函",
        desc: "麓湖年会邀请函",
        link: "http://yaoqinghan.cdzmd.com/OAuth.aspx",
        imgUrl: "http://yaoqinghan.cdzmd.com/page1/img/avatar.png",
        success: function() {},
        cancel: function() {}
    }),
    wx.onMenuShareAppMessage({
        title: "麓湖年会邀请函",
        desc: "麓湖年会邀请函",
        link: "http://yaoqinghan.cdzmd.com/OAuth.aspx",
        imgUrl: "http://yaoqinghan.cdzmd.com/page1/img/avatar.png",
        type: "link",
        success: function() {},
        cancel: function() {}
    }),
    wx.error(function(e) {})
});
